@using TextEdit.Core.Documents
@using TextEdit.Core.Editing
@using TextEdit.UI.Components.Editor

<main class="editor h-full min-h-0 flex flex-col" 
      role="tabpanel" 
      id="editor-panel"
      aria-labelledby="@(AppState.ActiveTab != null ? $"tab-{AppState.ActiveTab.Id}" : "")"
        style="height:100%;min-height:0;display:flex;flex-direction:column;flex:1 1 auto; position:relative;">
  <MonacoEditor @ref="_monacoEditor" @key="CurrentDoc?.Id" id="monaco-editor" @bind-Value="Content" />
  <SpellCheckDialog Visible="@_spellDialogVisible"
                   Word="@_spellDialogWord"
                   Context="@_spellDialogContext"
                   Suggestions="@(_spellDialogSuggestions?.Select(s => s.Word).ToList())"
                   OnPrev="EventCallback.Factory.Create(this, OnSpellPrev)"
                   OnNext="EventCallback.Factory.Create(this, OnSpellNext)"
                   OnReplace="EventCallback.Factory.Create<string>(this, OnSpellReplace)"
                   OnReplaceAll="EventCallback.Factory.Create<string>(this, OnSpellReplaceAll)"
                   OnAddToDictionary="EventCallback.Factory.Create<string>(this, OnSpellAddToDictionary)"
                   OnIgnore="EventCallback.Factory.Create<string>(this, OnSpellIgnore)"
                   OnIgnoreAll="EventCallback.Factory.Create<string>(this, OnSpellIgnoreAll)"
                   OnClose="EventCallback.Factory.Create(this, async () => { _spellDialogVisible = false; await InvokeAsync(StateHasChanged); })" />
</main>
